# å›½é™…åŒ–ï¼ˆi18nï¼‰å®æ–½æŒ‡å—

**æ—¥æœŸ**: 2026-02-07  
**çŠ¶æ€**: âœ… åŸºç¡€è®¾æ–½å°±ç»ªï¼Œå¾…ä»£ç è¿ç§»

## å®Œæˆçš„å·¥ä½œ

### 1. å­—ç¬¦ä¸²èµ„æºæ–‡ä»¶åˆ›å»º

å·²åˆ›å»ºåŒè¯­èµ„æºæ–‡ä»¶ï¼š
- âœ… `app/src/main/res/values/strings.xml` - ä¸­æ–‡ï¼ˆé»˜è®¤ï¼‰
- âœ… `app/src/main/res/values-en/strings.xml` - è‹±æ–‡

**èµ„æºç»Ÿè®¡**:
- æ€»å­—ç¬¦ä¸²æ•°ï¼š120+
- è¦†ç›–èŒƒå›´ï¼šåº•éƒ¨å¯¼èˆªã€è®¾ç½®ã€ç”¨è¯ã€æ—¥æŠ¥ã€å¯¹è¯æ¡†ã€é”™è¯¯æ¶ˆæ¯ç­‰
- æ ¼å¼åŒ–å­—ç¬¦ä¸²ï¼šæ”¯æŒ `%1$s`, `%d` ç­‰å‚æ•°åŒ–

### 2. ç¡¬ç¼–ç å­—ç¬¦ä¸²è¯†åˆ«

**æ‰«æç»“æœ**:
- ğŸ” è¯†åˆ«åˆ° **50+ å¤„**ç¡¬ç¼–ç ä¸­æ–‡å­—ç¬¦ä¸²
- ğŸ¯ ä¸»è¦åˆ†å¸ƒåœ¨ï¼š
  - `feature/medication/ui/` - ç”¨è¯ç›¸å…³ UIï¼ˆ25+ å¤„ï¼‰
  - `feature/settings/ui/` - è®¾ç½®é¡µé¢ï¼ˆ15+ å¤„ï¼‰
  - `feature/report/ui/` - æ—¥æŠ¥é¡µé¢ï¼ˆ10+ å¤„ï¼‰
  - androidTest/ - æµ‹è¯•æ–‡ä»¶ï¼ˆ5å¤„ï¼Œå¯å¿½ç•¥ï¼‰

---

## è¿ç§»ç­–ç•¥

### é˜¶æ®µ Aï¼šé«˜é¢‘ç•Œé¢ä¼˜å…ˆï¼ˆæ¨èå…ˆå®æ–½ï¼‰

**ä¼˜å…ˆçº§ P0** - ç”¨æˆ·æ¯æ—¥æ¥è§¦çš„æ ¸å¿ƒç•Œé¢ï¼š
1. âœ… åº•éƒ¨å¯¼èˆªæ ï¼ˆ4ä¸ª Tabï¼‰
2. âœ… è®¾ç½®é¡µé¢ï¼ˆAPI Keyã€å¤‡ä»½ã€æ•°æ®æ¸…ç†ï¼‰
3. â³ æ—¥æŠ¥æäº¤æµç¨‹ï¼ˆStep 0-3ï¼‰
4. â³ ç”¨è¯ç®¡ç†ï¼ˆæ·»åŠ ã€ç¼–è¾‘ã€ç–—ç¨‹ï¼‰

**é¢„è®¡å·¥ä½œé‡**: 4-6 å°æ—¶

### é˜¶æ®µ Bï¼šå¯¹è¯æ¡†ä¸åé¦ˆï¼ˆä¸­æœŸï¼‰

**ä¼˜å…ˆçº§ P1** - ç”¨æˆ·äº¤äº’åé¦ˆï¼š
1. â³ ç¡®è®¤å¯¹è¯æ¡†ï¼ˆåˆ é™¤ã€æ¸…ç©ºæ•°æ®ã€ç»“æŸç–—ç¨‹ç­‰ï¼‰
2. â³ Toast/Snackbar æ¶ˆæ¯ï¼ˆæˆåŠŸ/å¤±è´¥æç¤ºï¼‰
3. â³ é”™è¯¯æ¶ˆæ¯ï¼ˆç½‘ç»œã€APIã€éªŒè¯ï¼‰

**é¢„è®¡å·¥ä½œé‡**: 2-3 å°æ—¶

### é˜¶æ®µ Cï¼šè¯¦æƒ…ä¸è¯´æ˜ï¼ˆåæœŸï¼‰

**ä¼˜å…ˆçº§ P2** - ä½é¢‘ç•Œé¢ï¼š
1. â³ è¯å“è¯¦æƒ…é¡µé¢
2. â³ æ´å¯ŸæŠ¥å‘Šè¯¦æƒ…
3. â³ PDF åŒ»ç”ŸæŠ¥å‘Šæ–‡æ¡ˆ
4. â³ è°ƒè¯•é¡µé¢

**é¢„è®¡å·¥ä½œé‡**: 2-3 å°æ—¶

---

## ä½¿ç”¨æŒ‡å—

### åœ¨ Compose UI ä¸­ä½¿ç”¨

**ä¹‹å‰ï¼ˆç¡¬ç¼–ç ï¼‰**:
```kotlin
Text("æ·»åŠ ç”¨è¯")
```

**ä¹‹åï¼ˆå›½é™…åŒ–ï¼‰**:
```kotlin
Text(stringResource(R.string.medication_add))
```

### åœ¨ ViewModel ä¸­ä½¿ç”¨

éœ€è¦ Context æˆ– Applicationï¼š
```kotlin
class SettingsViewModel(
    private val app: Application
) : AndroidViewModel(app) {
    
    fun showMessage() {
        val message = app.getString(R.string.settings_api_key_updated)
        _events.emit(SettingsEvent.Snackbar(message))
    }
}
```

### æ ¼å¼åŒ–å­—ç¬¦ä¸²

**å®šä¹‰**:
```xml
<string name="medication_course_active">è¿›è¡Œä¸­ï¼ˆ%1$s ~ è‡³ä»Šï¼‰</string>
```

**ä½¿ç”¨**:
```kotlin
val formatted = stringResource(
    R.string.medication_course_active, 
    course.startDate.toString()
)
```

### å¤æ•°å½¢å¼ï¼ˆå¯é€‰æ‰©å±•ï¼‰

åˆ›å»º `plurals.xml`ï¼š
```xml
<plurals name="days_ago">
    <item quantity="one">%d å¤©å‰</item>
    <item quantity="other">%d å¤©å‰</item>
</plurals>
```

ä½¿ç”¨ï¼š
```kotlin
val text = resources.getQuantityString(R.plurals.days_ago, days, days)
```

---

## ç¤ºä¾‹è¿ç§»

### ç¤ºä¾‹ 1ï¼šè®¾ç½®é¡µé¢ - API Key è¾“å…¥æ¡†

**è¿ç§»å‰**:
```kotlin
OutlinedTextField(
    value = state.apiKeyInput,
    onValueChange = onApiKeyChanged,
    placeholder = { Text("â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢") },
    // ...
)
```

**è¿ç§»å**:
```kotlin
OutlinedTextField(
    value = state.apiKeyInput,
    onValueChange = onApiKeyChanged,
    placeholder = { Text(stringResource(R.string.settings_api_key_placeholder)) },
    // ...
)
```

### ç¤ºä¾‹ 2ï¼šç”¨è¯å¯¹è¯æ¡† - åˆ é™¤ç¡®è®¤

**è¿ç§»å‰**:
```kotlin
AlertDialog(
    title = { Text("ç¡®è®¤åˆ é™¤") },
    text = { Text("åˆ é™¤åå°†æ— æ³•æ¢å¤ï¼Œç¡®å®šè¦åˆ é™¤è¿™ä¸ªè¯å“å—ï¼Ÿ") },
    confirmButton = {
        Button(onClick = { /* ... */ }) {
            Text("åˆ é™¤")
        }
    },
    dismissButton = {
        TextButton(onClick = { /* ... */ }) {
            Text("å–æ¶ˆ")
        }
    }
)
```

**è¿ç§»å**:
```kotlin
AlertDialog(
    title = { Text(stringResource(R.string.medication_delete_confirm_title)) },
    text = { Text(stringResource(R.string.medication_delete_confirm_message)) },
    confirmButton = {
        Button(onClick = { /* ... */ }) {
            Text(stringResource(R.string.action_delete))
        }
    },
    dismissButton = {
        TextButton(onClick = { /* ... */ }) {
            Text(stringResource(R.string.action_cancel))
        }
    }
)
```

### ç¤ºä¾‹ 3ï¼šSnackbar æ¶ˆæ¯

**è¿ç§»å‰**:
```kotlin
viewModelScope.launch {
    _events.emit(SettingsEvent.Snackbar("API Key å·²æ›´æ–°"))
}
```

**è¿ç§»å**:
```kotlin
viewModelScope.launch {
    val message = app.getString(R.string.settings_api_key_updated)
    _events.emit(SettingsEvent.Snackbar(message))
}
```

---

## éªŒè¯æ¸…å•

### ç¼–è¯‘æ—¶éªŒè¯
- âœ… æ‰€æœ‰ `R.string.*` å¼•ç”¨å­˜åœ¨äº strings.xml
- âœ… æ ¼å¼åŒ–å­—ç¬¦ä¸²å‚æ•°æ•°é‡åŒ¹é…

### è¿è¡Œæ—¶éªŒè¯
1. **åˆ‡æ¢è¯­è¨€æµ‹è¯•**:
   - Settings â†’ System â†’ Languages â†’ æ·»åŠ  English â†’ é€‰æ‹©ä¸ºé¦–é€‰è¯­è¨€
   - é‡å¯åº”ç”¨ï¼ŒéªŒè¯æ‰€æœ‰æ–‡æœ¬æ˜¾ç¤ºè‹±æ–‡

2. **æ ¼å¼åŒ–å­—ç¬¦ä¸²æµ‹è¯•**:
   - éªŒè¯æ—¥æœŸã€æ•°å­—æ ¼å¼åŒ–æ­£ç¡®
   - éªŒè¯ `%1$s` å‚æ•°æ­£ç¡®æ›¿æ¢

3. **å›é€€æµ‹è¯•**:
   - å¦‚æœæŸä¸ªå­—ç¬¦ä¸²åœ¨ `values-en/` ä¸­ä¸å­˜åœ¨ï¼Œåº”å›é€€åˆ° `values/` ä¸­æ–‡ç‰ˆæœ¬

---

## å·¥å…·ä¸è„šæœ¬

### è‡ªåŠ¨åŒ–æŸ¥æ‰¾ç¡¬ç¼–ç å­—ç¬¦ä¸²

```bash
# æŸ¥æ‰¾æ‰€æœ‰ Text("ä¸­æ–‡") æ¨¡å¼
grep -r 'Text("[\u4e00-\u9fa5]' app/src/main/java/

# æŸ¥æ‰¾æ‰€æœ‰ label = { Text("ä¸­æ–‡") } æ¨¡å¼
grep -r 'label = { Text("[\u4e00-\u9fa5]' app/src/main/java/

# æŸ¥æ‰¾æ‰€æœ‰ placeholder = { Text("ä¸­æ–‡") } æ¨¡å¼
grep -r 'placeholder = { Text("[\u4e00-\u9fa5]' app/src/main/java/
```

### IDE å¿«æ·æ“ä½œ

**Android Studio å¿«é€Ÿæå–å­—ç¬¦ä¸²**:
1. é€‰ä¸­ç¡¬ç¼–ç å­—ç¬¦ä¸²
2. Alt + Enter (Windows/Linux) æˆ– Option + Enter (Mac)
3. é€‰æ‹© "Extract string resource"
4. è¾“å…¥èµ„æºåç§°ï¼ˆå¦‚ `medication_add`ï¼‰

---

## æœªæ¥æ‰©å±•

### æ”¯æŒæ›´å¤šè¯­è¨€ï¼ˆå¯é€‰ï¼‰

åˆ›å»ºæ–°çš„èµ„æºç›®å½•ï¼š
- `values-zh-rTW/` - ç¹ä½“ä¸­æ–‡ï¼ˆå°æ¹¾ï¼‰
- `values-ja/` - æ—¥è¯­
- `values-ko/` - éŸ©è¯­
- `values-es/` - è¥¿ç­ç‰™è¯­

### åŠ¨æ€è¯­è¨€åˆ‡æ¢ï¼ˆåº”ç”¨å†…ï¼‰

å¦‚æœéœ€è¦åœ¨åº”ç”¨å†…åˆ‡æ¢è¯­è¨€ï¼ˆä¸ä¾èµ–ç³»ç»Ÿè®¾ç½®ï¼‰ï¼š

```kotlin
object LocaleHelper {
    fun setLocale(context: Context, languageCode: String) {
        val locale = Locale(languageCode)
        Locale.setDefault(locale)
        
        val config = context.resources.configuration
        config.setLocale(locale)
        context.createConfigurationContext(config)
    }
}

// ä½¿ç”¨
LocaleHelper.setLocale(context, "en") // åˆ‡æ¢åˆ°è‹±æ–‡
```

### å­—ç¬¦ä¸²éªŒè¯å·¥å…·

åˆ›å»ºå•å…ƒæµ‹è¯•éªŒè¯å­—ç¬¦ä¸²èµ„æºï¼š

```kotlin
@Test
fun allStringsExistInBothLanguages() {
    val zhStrings = context.resources.getStringArray(R.array.all_string_keys)
    val enContext = context.createConfigurationContext(
        Configuration().apply { setLocale(Locale.ENGLISH) }
    )
    
    zhStrings.forEach { key ->
        val enValue = enContext.getString(key)
        assertNotNull("Missing English translation for $key", enValue)
    }
}
```

---

## å½“å‰çŠ¶æ€

- âœ… **åŸºç¡€è®¾æ–½**: strings.xml (ä¸­æ–‡ + è‹±æ–‡) å·²åˆ›å»º
- âœ… **èµ„æºå®šä¹‰**: 120+ å¸¸ç”¨å­—ç¬¦ä¸²å·²å®šä¹‰
- â³ **ä»£ç è¿ç§»**: 0% å®Œæˆï¼ˆå¾…å®æ–½ï¼‰
- â³ **æµ‹è¯•éªŒè¯**: å¾…è¿ç§»å®Œæˆåæµ‹è¯•

---

## æ¨èå®æ–½é¡ºåº

1. **Week 1**: è¿ç§»è®¾ç½®é¡µé¢ï¼ˆé«˜é¢‘+å…³é”®ï¼‰
2. **Week 2**: è¿ç§»ç”¨è¯ç®¡ç†ï¼ˆå¤æ‚åº¦é«˜ï¼‰
3. **Week 3**: è¿ç§»æ—¥æŠ¥ä¸æ´å¯Ÿï¼ˆæ ¸å¿ƒæµç¨‹ï¼‰
4. **Week 4**: éªŒè¯ä¸ä¿®æ­£ï¼ˆå…¨æµç¨‹æµ‹è¯•ï¼‰

---

## æ³¨æ„äº‹é¡¹

### âš ï¸ é¿å…çš„é™·é˜±

1. **ä¸è¦åœ¨ ViewModel ä¸­ç›´æ¥ä½¿ç”¨ stringResource()**
   - âŒ `val text = stringResource(R.string.xxx)` ï¼ˆCompose ä¸“ç”¨ï¼‰
   - âœ… `val text = app.getString(R.string.xxx)` ï¼ˆéœ€è¦ Applicationï¼‰

2. **æ³¨æ„ Context ç”Ÿå‘½å‘¨æœŸ**
   - ViewModel åº”ä½¿ç”¨ `ApplicationContext` è€Œé Activity Context

3. **æ ¼å¼åŒ–å­—ç¬¦ä¸²é¡ºåº**
   - ä½¿ç”¨ `%1$s`, `%2$s` è€Œé `%s` ï¼ˆæ”¯æŒé‡æ’åºï¼‰

4. **é¿å…å­—ç¬¦ä¸²æ‹¼æ¥**
   - âŒ `"è¿›è¡Œä¸­ï¼ˆ$date ~ è‡³ä»Šï¼‰"`
   - âœ… `getString(R.string.medication_course_active, date)`

### âœ… æœ€ä½³å®è·µ

1. **èµ„æºå‘½åè§„èŒƒ**:
   - åŠŸèƒ½_ç»„ä»¶_å«ä¹‰ï¼š`medication_add`, `settings_api_key_label`
   - åŠ¨ä½œå‰ç¼€ï¼š`action_save`, `error_network`

2. **ä¿æŒç®€æ´**:
   - å­—ç¬¦ä¸² ID ä¸è¶…è¿‡ 50 å­—ç¬¦
   - é¿å…è¿‡åº¦ç»†åˆ†ï¼ˆå¦‚ `button_save_medication` å¯ç®€åŒ–ä¸º `action_save`ï¼‰

3. **æ³¨é‡Šé‡è¦èµ„æº**:
   ```xml
   <!-- ç”¨äºåŒ»ç”ŸæŠ¥å‘Šä¸­æ˜¾ç¤ºç–—ç¨‹çŠ¶æ€ï¼Œ%1$s=å¼€å§‹æ—¥æœŸ -->
   <string name="medication_course_active">è¿›è¡Œä¸­ï¼ˆ%1$s ~ è‡³ä»Šï¼‰</string>
   ```

---

## å‚è€ƒèµ„æ–™

- [Android æœ¬åœ°åŒ–æŒ‡å—](https://developer.android.com/guide/topics/resources/localization)
- [Compose å­—ç¬¦ä¸²èµ„æº](https://developer.android.com/jetpack/compose/resources#strings)
- [æ ¼å¼åŒ–å­—ç¬¦ä¸²](https://developer.android.com/guide/topics/resources/string-resource#FormattingAndStyling)
- [è¯­è¨€å’ŒåŒºåŸŸä»£ç ](https://developer.android.com/guide/topics/resources/providing-resources#AlternativeResources)
