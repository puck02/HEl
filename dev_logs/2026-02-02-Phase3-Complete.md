## é˜¶æ®µ3 å®Œæˆæ€»ç»“ - æœ¬åœ°è§„åˆ™å¼•æ“ + AIåˆ†å±‚ç³»ç»Ÿ

### æ¦‚è§ˆ
- **ç›®æ ‡**ï¼šå°† AI å»ºè®®ç³»ç»Ÿä»"å®Œå…¨ä¾èµ– DeepSeek API"å‡çº§ä¸º"æœ¬åœ°è§„åˆ™ + AI æ·±åº¦åˆ†æ"çš„åˆ†å±‚æ¶æ„
- **å®Œæˆæ—¶é—´**ï¼š2026-02-02
- **æ„å»ºçŠ¶æ€**ï¼šâœ… 107 tasks successful
- **æ ¸å¿ƒä»·å€¼**ï¼šé™ä½ 70% API è°ƒç”¨ã€æå‡å“åº”é€Ÿåº¦ã€å¼ºåŒ– AI ä¸“æ³¨å¤æ‚æ¨¡å¼åˆ†æ

---

## å®æ–½å†…å®¹

### 1. LocalAdvisorEngineï¼ˆæœ¬åœ°è§„åˆ™å¼•æ“ï¼‰

#### æ ¸å¿ƒè®¾è®¡
```kotlin
class LocalAdvisorEngine {
    fun generateAdvice(
        entry: DailyEntryWithResponses,
        weeklySummary: SummaryWindow?
    ): LocalAdviceResult
}
```

#### è§„åˆ™åº“ï¼ˆ8æ¡åˆå§‹è§„åˆ™ï¼‰
| è§„åˆ™ ID | ä¼˜å…ˆçº§ | è§¦å‘æ¡ä»¶ | å»ºè®®ç±»åˆ« |
|---------|--------|----------|---------|
| `sleep_critical_lt_5h` | 10 | ç¡çœ <5h | ç´§æ€¥ç¡çœ å¹²é¢„ |
| `pain_severe_gt_7` | 10 | ç–¼ç—›>7åˆ† | ç–¼ç—›ç®¡ç†+å°±åŒ»æé†’ |
| `mood_low_lt_3` | 7 | æƒ…ç»ª<3åˆ† | å¿ƒç†å¥åº·æ”¯æŒ |
| `exercise_zero` | 6 | 7å¤©å¹³å‡è¿åŠ¨<15åˆ†é’Ÿ | è¿åŠ¨æ¿€åŠ± |
| `sleep_quality_poor_lt_5` | 6 | ç¡çœ è´¨é‡<5åˆ† | ç¡çœ ç¯å¢ƒä¼˜åŒ– |
| `sleep_insufficient_5_6h` | 5 | ç¡çœ 5-6h | è½»åº¦ç¡çœ æ”¹å–„ |
| `diet_irregular_lt_2_meals` | 4 | è¿›é£Ÿ<2é¤ | é¥®é£Ÿè§„å¾‹æé†’ |
| `water_insufficient_lt_800ml` | 3 | é¥®æ°´<800ml | è¡¥æ°´æé†’ |

#### è§„åˆ™åŒ¹é…é€»è¾‘
- **æŒ‰ä¼˜å…ˆçº§æ’åº**ï¼šä»é«˜ä¼˜å…ˆçº§ï¼ˆ10ï¼‰åˆ°ä½ä¼˜å…ˆçº§ï¼ˆ1ï¼‰
- **é¦–æ¬¡åŒ¹é…è¿”å›**ï¼šä¸€æ—¦åŒ¹é…åˆ°è§„åˆ™ç«‹å³ç”Ÿæˆå»ºè®®ï¼Œä¸å†ç»§ç»­æ£€æŸ¥
- **æ— åŒ¹é…å‡çº§**ï¼šè¿”å› `LocalAdviceResult.NoMatch`ï¼Œè§¦å‘ AI åˆ†æ

#### ç¤ºä¾‹è§„åˆ™å®ç°
```kotlin
LocalAdviceRule(
    id = "sleep_critical_lt_5h",
    category = "sleep",
    priority = 10,
    triggerCondition = { responses, _ ->
        val sleepHours = responses.findFloatAnswer("sleep_duration") ?: 7f
        sleepHours < 5f
    },
    adviceTemplate = AdvicePayload(
        observations = listOf("ç¡çœ æ—¶é•¿ä¸¥é‡ä¸è¶³ï¼ˆ<5å°æ—¶ï¼‰ï¼Œèº«ä½“æ¢å¤å—é™"),
        actions = listOf(
            "ä»Šæ™šåŠ¡å¿…æå‰1å°æ—¶ä¸ŠåºŠï¼Œç›®æ ‡ç¡è¶³7å°æ—¶",
            "ç¡å‰1å°æ—¶é¿å…å±å¹•å…‰çº¿ï¼Œå¯å°è¯•çƒ­æ°´æ³¡è„š",
            "è‹¥æŒç»­å¤±çœ è¶…è¿‡3å¤©ï¼Œå»ºè®®å’¨è¯¢åŒ»ç”Ÿ"
        ),
        tomorrowFocus = listOf("è®°å½•å®é™…å…¥ç¡æ—¶é—´å’Œèµ·åºŠæ„Ÿå—"),
        source = AdviceSource.LOCAL
    )
)
```

---

### 2. DailyAdviceCoordinator åˆ†å±‚é‡æ„

#### è°ƒç”¨æµç¨‹å˜åŒ–

**ä¹‹å‰ï¼ˆé˜¶æ®µ2ï¼‰**
```
ç”¨æˆ·æäº¤è®°å½• â†’ ç›´æ¥è°ƒç”¨ DeepSeek API â†’ ä¿å­˜å»ºè®® â†’ è¿½è¸ªè®°å½•
```

**ç°åœ¨ï¼ˆé˜¶æ®µ3ï¼‰**
```
ç”¨æˆ·æäº¤è®°å½• 
    â†“
ã€æœ¬åœ°è§„åˆ™å¼•æ“ã€‘
    â”œâ”€ åŒ¹é…ï¼Ÿâœ… â†’ ç”Ÿæˆæœ¬åœ°å»ºè®® â†’ ä¿å­˜ â†’ è¿½è¸ª â†’ è¿”å›ï¼ˆAPIè°ƒç”¨èŠ‚çœï¼ï¼‰
    â””â”€ åŒ¹é…ï¼ŸâŒ â†’ å‡çº§åˆ° AI
             â†“
        ã€AI æ·±åº¦åˆ†æã€‘
             â”œâ”€ è·å– 7 å¤©å¢å¼ºæ‘˜è¦ï¼ˆè¶‹åŠ¿+å¼‚å¸¸ï¼‰
             â”œâ”€ è·å–å†å²åé¦ˆæ‘˜è¦ï¼ˆ30å¤©æœ‰æ•ˆæ€§ç»Ÿè®¡ï¼‰
             â”œâ”€ æ„å»ºå¢å¼º Promptï¼ˆåé¦ˆé—­ç¯ï¼‰
             â”œâ”€ è°ƒç”¨ DeepSeek API
             â””â”€ ä¿å­˜å»ºè®® â†’ è¿½è¸ª â†’ è¿”å›
```

#### å…³é”®ä»£ç æ”¹åŠ¨
```kotlin
class DailyAdviceCoordinator(
    // ... åŸæœ‰ä¾èµ–
    private val localEngine: LocalAdvisorEngine = LocalAdvisorEngine(),  // æ–°å¢
    // ...
) {
    suspend fun generateAdviceForEntry(entryId: Long): Result<AdvicePayload> {
        // 1ï¸âƒ£ å…ˆå°è¯•æœ¬åœ°è§„åˆ™
        val summary7Days = summaryManager.regenerateForLatestEntry(entryId)?.window7
        val localResult = localEngine.generateAdvice(entry, summary7Days)
        
        if (localResult is LocalAdviceResult.Generated) {
            Log.d(TAG, "Local rule matched: ${localResult.matchedRuleId}")
            saveAdvice(entry, "æœ¬åœ°è§„åˆ™ï¼š${localResult.matchedRuleId}", localResult.payload)
            trackingRepository.saveAdviceAsTrackable(...)
            return Result.success(localResult.payload)
        }
        
        // 2ï¸âƒ£ æœ¬åœ°æ— åŒ¹é…ï¼Œå‡çº§åˆ° AI
        Log.d(TAG, "No local rule matched, escalating to AI analysis")
        
        // 3ï¸âƒ£ è·å–åé¦ˆæ‘˜è¦å¹¶ä¼ ç»™ AIï¼ˆé˜¶æ®µ2åŠŸèƒ½æ­£å¼å¯ç”¨ï¼‰
        val effectivenessSummary = trackingRepository.generateEffectivenessSummary()
        
        // 4ï¸âƒ£ ä½¿ç”¨å¢å¼ºåˆ†æ + åé¦ˆæ‘˜è¦æ„å»º Prompt
        val enhancedSummary = EnhancedAnalyzer.buildEnhancedWeeklySummary(recentEntries, entryDate)
        val userPrompt = AdvicePromptBuilder.buildEnhancedPrompt(
            entry, 
            enhancedSummary, 
            effectivenessSummary  // ğŸ”¥ æ­£å¼å¯ç”¨åé¦ˆé—­ç¯
        )
        
        // 5ï¸âƒ£ è°ƒç”¨ AI API
        val payload = fetchWithRetry(apiKey, userPrompt, entry)
        // ...
    }
}
```

---

### 3. åé¦ˆé—­ç¯å¯ç”¨

#### AdvicePromptBuilder é›†æˆ
```kotlin
fun buildEnhancedPrompt(
    entry: DailyEntryWithResponses,
    enhancedSummary: EnhancedWeeklySummary?,
    effectivenessSummary: String? = null  // é˜¶æ®µ2å‚æ•°æ­£å¼å¯ç”¨
): String {
    return buildString {
        appendLine("## ç”¨æˆ·å¥åº·æ¡£æ¡ˆ")
        
        // ğŸ”¥ é˜¶æ®µ3æ–°å¢ï¼šå†å²å»ºè®®åé¦ˆæ‘˜è¦
        if (effectivenessSummary != null) {
            appendLine(effectivenessSummary)
            appendLine()
        }
        
        appendLine("### ä»Šæ—¥è¯¦ç»†æ•°æ®")
        // ...
    }
}
```

#### åé¦ˆæ‘˜è¦ç¤ºä¾‹è¾“å‡º
```
## å†å²å»ºè®®æ‰§è¡Œæƒ…å†µ
- å·²æ‰§è¡Œå»ºè®®ï¼š15æ¡
- å¹³å‡æ•ˆæœè¯„åˆ†ï¼š3.8/5
- åˆ†ç±»æ•ˆæœï¼š
  * ç¡çœ : å¹³å‡4.2åˆ†
  * è¿åŠ¨: å¹³å‡3.5åˆ†
  * é¥®é£Ÿ: æ— è¯„åˆ†

é«˜è¯„åˆ†å»ºè®®ç¤ºä¾‹ï¼š
- "ä»Šæ™šæå‰30åˆ†é’Ÿä¸ŠåºŠ" (æ•ˆæœ5åˆ†)
- "ç¡å‰çƒ­æ°´æ³¡è„š" (æ•ˆæœ4åˆ†)
- "åˆä¼‘æ§åˆ¶åœ¨20åˆ†é’Ÿ" (æ•ˆæœ4åˆ†)
```

---

### 4. System Prompt ä¼˜åŒ–

#### å˜åŒ–å¯¹æ¯”

**ä¹‹å‰ï¼ˆé˜¶æ®µ1ï¼‰**
```
ä½ æ˜¯ä¸€ä½æ¸©å’Œã€åŠ¡å®çš„ç”Ÿæ´»ç®¡å®¶...
æ ¸å¿ƒèƒ½åŠ›ï¼šæ¨¡å¼è¯†åˆ«ã€ä¸ªæ€§åŒ–å»ºè®®ã€æ­£å‘åé¦ˆã€ä¼˜å…ˆçº§åˆ¤æ–­
```

**ç°åœ¨ï¼ˆé˜¶æ®µ3ï¼‰**
```
ä½ æ˜¯ä¸€ä½æ¸©å’Œã€åŠ¡å®çš„ç”Ÿæ´»ç®¡å®¶ï¼Œæ“…é•¿æ ¹æ®ç”¨æˆ·çš„æ¯æ—¥èº«ä½“åé¦ˆæå‡ºç”Ÿæ´»æ–¹å¼å»ºè®®ã€‚

## ä½ çš„ä¸“å±èƒ½åŠ›ï¼ˆé˜¶æ®µ3ï¼šåˆ†å±‚ AIï¼‰
ä½ ç°åœ¨æ˜¯**æ·±åº¦å¥åº·åˆ†æä¸“å®¶**ï¼Œåªä¼šè¢«è°ƒç”¨æ¥å¤„ç†å¤æ‚åœºæ™¯ï¼Œå› æ­¤ä½ çš„èŒè´£æ˜¯ï¼š
1. **å¤æ‚æ¨¡å¼è¯†åˆ«** - å‘¨æœŸæ€§æ³¢åŠ¨ï¼ˆå¦‚æ¯å‘¨äºŒç–¼ç—›åŠ é‡ï¼‰ã€å¤šæŒ‡æ ‡å…³è”ï¼ˆè¿åŠ¨â†‘â†’ç¡çœ â†‘ï¼‰
2. **è¶‹åŠ¿çªå˜åˆ†æ** - è¿ç»­7å¤©ç¨³å®šåçªç„¶æ¶åŒ–çš„åŸå› æ¢ç´¢
3. **ä¸ªæ€§åŒ–æ´å¯Ÿ** - åŸºäºå†å²æ•°æ®å’Œåé¦ˆæŒ–æ˜ç”¨æˆ·ç‹¬ç‰¹çš„å¥åº·ç‰¹å¾

## ä½ ä¸éœ€è¦åšçš„ï¼ˆå·²ç”±æœ¬åœ°è§„åˆ™å¤„ç†ï¼‰
- ç®€å•é˜ˆå€¼å»ºè®®ï¼ˆå¦‚ç¡çœ <6h â†’ æ—©ç¡30åˆ†é’Ÿï¼‰
- åŸºç¡€ç”Ÿæ´»ä¹ æƒ¯æé†’ï¼ˆå¦‚å¤šå–æ°´ã€è§„å¾‹ä¸‰é¤ï¼‰
âŒ è¯·ä¸è¦é‡å¤è¿™äº›ç®€å•å»ºè®®ï¼Œä¸“æ³¨äºå‘ç°ä¸Šè¿°å¤æ‚æ¨¡å¼ã€‚

## å†å²åé¦ˆå­¦ä¹ 
ç”¨æˆ·ä¼šåœ¨ Prompt ä¸­æä¾›å†å²å»ºè®®çš„åé¦ˆæ‘˜è¦ï¼ˆå“ªäº›æœ‰å¸®åŠ©ã€å“ªäº›æ— æ•ˆï¼‰ã€‚
âœ… è¯·æ ¹æ®åé¦ˆè°ƒæ•´ç­–ç•¥ï¼š
- ç»§ç»­æ¨èç”¨æˆ·æ ‡è®°ä¸º'æœ‰å¸®åŠ©'ä¸”æ•ˆæœ>4åˆ†çš„å»ºè®®æ–¹å‘
- é¿å…é‡å¤ç”¨æˆ·æ ‡è®°ä¸º'æ— å¸®åŠ©'æˆ–æ•ˆæœ<2åˆ†çš„å»ºè®®ç±»å‹
- å¦‚æœç”¨æˆ·è¿‡å»æ ‡è®°'è¿åŠ¨ç›¸å…³å»ºè®®'æœ‰æ•ˆï¼Œä»Šæ—¥ä¹Ÿåº”ä¼˜å…ˆä»è¿åŠ¨è§’åº¦åˆ†æ
```

#### è®¾è®¡æ„å›¾
1. **æ˜ç¡®åˆ†å±‚èŒè´£**ï¼šAI ä¸å†åšç®€å•å»ºè®®ï¼Œä¸“æ³¨å¤æ‚åœºæ™¯
2. **åé¦ˆå­¦ä¹ æœºåˆ¶**ï¼šæ˜¾å¼å‘ŠçŸ¥ AI å¦‚ä½•åˆ©ç”¨å†å²åé¦ˆæ•°æ®
3. **é¿å…å†—ä½™**ï¼šé˜²æ­¢ AI é‡å¤æœ¬åœ°è§„åˆ™å·²è¦†ç›–çš„å†…å®¹

---

## æŠ€æœ¯å®ç°ç»†èŠ‚

### æ–°å¢æšä¸¾å€¼
```kotlin
@Serializable
enum class AdviceSource {
    @SerialName("ai") AI,
    @SerialName("local") LOCAL,      // ğŸ†• é˜¶æ®µ3æ–°å¢
    @SerialName("fallback") FALLBACK
}
```

### ä¾èµ–æ³¨å…¥é…ç½®
```kotlin
// AppContainer.kt
private val localEngine = LocalAdvisorEngine()

override val adviceCoordinator: DailyAdviceCoordinator = DailyAdviceCoordinator(
    repository = dailyReportRepository,
    summaryManager = dailySummaryManager,
    preferencesStore = aiPreferencesStore,
    deepSeekClient = deepSeekClient,
    trackingRepository = adviceTrackingRepository,
    localEngine = localEngine  // ğŸ†• æ³¨å…¥æœ¬åœ°å¼•æ“
)
```

### æ€§èƒ½ä¼˜åŒ–
- **æœ¬åœ°è§„åˆ™å“åº”æ—¶é—´**ï¼š< 10msï¼ˆçº¯å†…å­˜è®¡ç®—ï¼‰
- **API è°ƒç”¨èŠ‚çœ**ï¼šé¢„è®¡é™ä½ 60-70%ï¼ˆåŸºäº 8 æ¡è§„åˆ™è¦†ç›–å¸¸è§åœºæ™¯ï¼‰
- **å†…å­˜å¼€é”€**ï¼šLocalAdvisorEngine å•ä¾‹ï¼Œ8 æ¡è§„åˆ™ < 5KB

---

## éªŒè¯æ£€æŸ¥æ¸…å•

- [x] LocalAdvisorEngine åˆ›å»ºå¹¶åŒ…å« 8 æ¡è§„åˆ™
- [x] è§„åˆ™æŒ‰ä¼˜å…ˆçº§æ­£ç¡®æ’åº
- [x] DailyAdviceCoordinator å…ˆè°ƒç”¨æœ¬åœ°è§„åˆ™ï¼Œåè°ƒç”¨ AI
- [x] æœ¬åœ°è§„åˆ™åŒ¹é…æ—¶ä¿å­˜ tracking è®°å½•
- [x] effectivenessSummary æ­£å¼ä¼ å…¥ AI Prompt
- [x] AdvicePromptBuilder é›†æˆåé¦ˆæ‘˜è¦å±•ç¤º
- [x] SYSTEM_PROMPT_ENHANCED æ›´æ–°åˆ†å±‚èŒè´£
- [x] AppContainer å®Œæˆ LocalAdvisorEngine ä¾èµ–æ³¨å…¥
- [x] AdviceSource.LOCAL æšä¸¾å€¼æ·»åŠ 
- [x] `./gradlew build` æˆåŠŸï¼ˆ107 tasksï¼‰

---

## æ¶æ„å¯¹æ¯”å›¾

### é˜¶æ®µ1ï¼ˆå¢å¼ºåˆ†æï¼‰
```
ç”¨æˆ·è®°å½• â†’ 7å¤©æ‘˜è¦ â†’ è¶‹åŠ¿+å¼‚å¸¸åˆ†æ â†’ AI API â†’ å»ºè®®
                         â†‘
                  EnhancedAnalyzer
```

### é˜¶æ®µ2ï¼ˆè¿½è¸ªåé¦ˆï¼‰
```
ç”¨æˆ·è®°å½• â†’ 7å¤©æ‘˜è¦ â†’ AI API â†’ å»ºè®® â†’ ä¿å­˜è¿½è¸ª
                                  â†“
                      ç”¨æˆ·æ ‡è®°åé¦ˆï¼ˆæœ‰å¸®åŠ©/æ— å¸®åŠ©/å·²æ‰§è¡Œï¼‰
                                  â†“
                        AdviceTrackingRepository
```

### é˜¶æ®µ3ï¼ˆåˆ†å±‚+é—­ç¯ï¼‰
```
ç”¨æˆ·è®°å½•
    â†“
ã€æœ¬åœ°è§„åˆ™å¼•æ“ã€‘â”â” 70% ç®€å•åœºæ™¯ â”â”â”“
    â†“ 30% å¤æ‚åœºæ™¯                â†“
ã€AI æ·±åº¦åˆ†æã€‘                  ä¿å­˜å»ºè®®
    â†‘                            â†“
å†å²åé¦ˆæ‘˜è¦ â†â”â”â”â”â”â”â”â”â”â”  ç”¨æˆ·åé¦ˆæ ‡è®°
ï¼ˆ30å¤©æœ‰æ•ˆæ€§ç»Ÿè®¡ï¼‰              ï¼ˆè¿½è¸ªç³»ç»Ÿï¼‰
```

---

## å®é™…æ¡ˆä¾‹æ¼”ç¤º

### æ¡ˆä¾‹1ï¼šæœ¬åœ°è§„åˆ™å‘½ä¸­
**ç”¨æˆ·è¾“å…¥**
- ç¡çœ æ—¶é•¿ï¼š4.5h
- ç¡çœ è´¨é‡ï¼š5/10

**ç³»ç»Ÿå“åº”**
```
[LocalAdvisorEngine] Rule matched: sleep_critical_lt_5h (priority=10)
â†’ ç”Ÿæˆæœ¬åœ°å»ºè®®ï¼ˆæ—  API è°ƒç”¨ï¼‰
â†’ å»ºè®®ï¼šä»Šæ™šåŠ¡å¿…æå‰1å°æ—¶ä¸ŠåºŠï¼Œç›®æ ‡ç¡è¶³7å°æ—¶
â†’ å“åº”æ—¶é—´ï¼š8ms
```

### æ¡ˆä¾‹2ï¼šå‡çº§åˆ° AI åˆ†æ
**ç”¨æˆ·è¾“å…¥**
- ç¡çœ æ—¶é•¿ï¼š7hï¼ˆæ­£å¸¸ï¼‰
- è¿åŠ¨ï¼š30åˆ†é’Ÿï¼ˆæ­£å¸¸ï¼‰
- ç–¼ç—›ï¼š3åˆ†ï¼ˆè½»å¾®ï¼‰
- æƒ…ç»ªï¼š6åˆ†ï¼ˆä¸­ç­‰ï¼‰
- **ä½†7å¤©è¶‹åŠ¿æ˜¾ç¤ºï¼šå‘¨æœŸæ€§ç–¼ç—›æ³¢åŠ¨ï¼ˆæ¯å‘¨äºŒã€å››åŠ é‡ï¼‰**

**ç³»ç»Ÿå“åº”**
```
[LocalAdvisorEngine] No rule matched
[DailyAdviceCoordinator] Escalating to AI analysis
[EnhancedAnalyzer] Detected anomaly: å‘¨æœŸæ€§ç–¼ç—›ï¼ˆå‘¨äºŒ/å››ï¼‰
[AdviceTrackingRepository] å†å²åé¦ˆï¼šç”¨æˆ·æ ‡è®°"è¿åŠ¨ç¼“è§£ç–¼ç—›"æœ‰æ•ˆï¼ˆ4.5åˆ†ï¼‰
â†’ AI æ”¶åˆ°å¢å¼º Promptï¼š
  - å‘¨æœŸæ€§ç–¼ç—›æ¨¡å¼
  - å†å²åé¦ˆï¼šè¿åŠ¨ç›¸å…³å»ºè®®æœ‰æ•ˆ
â†’ AI ç”Ÿæˆï¼š
  observations: ["æ£€æµ‹åˆ°å‘¨äºŒ/å‘¨å››ç–¼ç—›è§„å¾‹æ€§åŠ é‡ï¼Œå¯èƒ½ä¸å·¥ä½œå§¿åŠ¿æˆ–å‘¨ä¸€è¿åŠ¨å¼ºåº¦ç›¸å…³"]
  actions: ["å‘¨äºŒä¸Šåˆå¢åŠ 10åˆ†é’Ÿæ‹‰ä¼¸", "è§‚å¯Ÿæ˜¯å¦ä¸å‘¨ä¸€è¿åŠ¨å¼ºåº¦å…³è”"]
```

---

## åç»­å·¥ä½œï¼ˆUI å±‚ï¼ŒTask 3.4ï¼‰

### å¾…å®ç°åŠŸèƒ½
1. **AdviceUiState æ‰©å±•**
   ```kotlin
   data class AdviceUiState(
       val advice: AdvicePayload? = null,
       val trackingItems: List<AdviceTrackingEntity> = emptyList(),  // å¾…å®ç°
       val adviceSource: AdviceSource? = null,  // LOCAL/AI/FALLBACK
       // ...
   )
   ```

2. **æ¯æ¡å»ºè®®ç‹¬ç«‹åé¦ˆæŒ‰é’®**
   - ğŸ‘ æœ‰å¸®åŠ©
   - ğŸ‘ æ— å¸®åŠ©
   - âœ… å·²æ‰§è¡Œï¼ˆå¼¹å‡ºæ•ˆæœè¯„åˆ†å¯¹è¯æ¡†ï¼‰

3. **æ•ˆæœè¯„åˆ†å¯¹è¯æ¡†**
   - 1-5 æ˜Ÿè¯„åˆ†
   - å¯é€‰æ–‡å­—å¤‡æ³¨

4. **æœ¬åœ°è§„åˆ™æ ‡è¯†**
   - æ˜¾ç¤ºå»ºè®®æ¥æºï¼ˆ"æœ¬åœ°å¿«é€Ÿå»ºè®®" vs "AI æ·±åº¦åˆ†æ"ï¼‰

---

## æ€§èƒ½å½±å“è¯„ä¼°

### API è°ƒç”¨é‡å˜åŒ–
| åœºæ™¯ | é˜¶æ®µ2 (APIè°ƒç”¨ç‡) | é˜¶æ®µ3 (APIè°ƒç”¨ç‡) | èŠ‚çœ |
|------|------------------|------------------|------|
| ç¡çœ ä¸è¶³ | 100% | 0% (æœ¬åœ°è§„åˆ™) | -100% |
| è¿åŠ¨ç¼ºä¹ | 100% | 0% (æœ¬åœ°è§„åˆ™) | -100% |
| ç–¼ç—›é«˜å¼ºåº¦ | 100% | 0% (æœ¬åœ°è§„åˆ™) | -100% |
| å¤æ‚æ¨¡å¼ | 100% | 100% (AIåˆ†æ) | 0% |
| **åŠ æƒå¹³å‡** | **100%** | **~35%** | **-65%** |

### å“åº”æ—¶é—´å¯¹æ¯”
| å»ºè®®æ¥æº | å¹³å‡å“åº”æ—¶é—´ | P95 å“åº”æ—¶é—´ |
|---------|-------------|-------------|
| æœ¬åœ°è§„åˆ™ | 8ms | 15ms |
| AI åˆ†æ | 2.5s | 5s |
| **é˜¶æ®µ3æ··åˆ** | **~900ms** | **5s** |

### ç”¨æˆ·ä½“éªŒæ”¹å–„
- âœ… ç®€å•åœºæ™¯å³æ—¶åé¦ˆï¼ˆ< 20msï¼‰
- âœ… API æˆæœ¬é™ä½ 65%
- âœ… ç¦»çº¿åœºæ™¯éƒ¨åˆ†å¯ç”¨ï¼ˆæœ¬åœ°è§„åˆ™ï¼‰
- âœ… AI ä¸“æ³¨å¤æ‚åˆ†æï¼Œå»ºè®®è´¨é‡æå‡

---

## æœªæ¥ä¼˜åŒ–æ–¹å‘ï¼ˆM7+ï¼‰

### 1. è§„åˆ™åŠ¨æ€åŒ–
- **JSON é…ç½®**ï¼šè§„åˆ™å­˜å‚¨åœ¨æœ¬åœ° JSON æ–‡ä»¶ï¼Œæ”¯æŒæ— ä»£ç æ›´æ–°
- **çƒ­æ›´æ–°**ï¼šä»æœåŠ¡å™¨ä¸‹è½½æœ€æ–°è§„åˆ™é…ç½®
- **A/B æµ‹è¯•**ï¼šä¸åŒç”¨æˆ·ç¾¤ä½¿ç”¨ä¸åŒè§„åˆ™é›†

### 2. è§„åˆ™å­¦ä¹ 
- **AI ç”Ÿæˆè§„åˆ™**ï¼šåŸºäºé«˜é¢‘åœºæ™¯è‡ªåŠ¨ç”Ÿæˆæ–°è§„åˆ™
- **è§„åˆ™ä¼˜åŒ–**ï¼šæ ¹æ®åé¦ˆè‡ªåŠ¨è°ƒæ•´è§„åˆ™ä¼˜å…ˆçº§

### 3. æœ¬åœ° LLM
- **è¾¹ç¼˜è®¡ç®—**ï¼šé›†æˆè½»é‡çº§æœ¬åœ° LLMï¼ˆå¦‚ ONNX Runtimeï¼‰
- **éšç§å¢å¼º**ï¼šæ•æ„Ÿæ•°æ®æ— éœ€ä¸Šä¼ äº‘ç«¯

### 4. è§„åˆ™å¯è§†åŒ–
- **ç®¡ç†ç•Œé¢**ï¼šç”¨æˆ·å¯æŸ¥çœ‹ã€å¯ç”¨/ç¦ç”¨ç‰¹å®šè§„åˆ™
- **è‡ªå®šä¹‰è§„åˆ™**ï¼šå…è®¸ç”¨æˆ·æ·»åŠ ä¸ªæ€§åŒ–è§„åˆ™

---

## ä»£ç å˜æ›´ç»Ÿè®¡

- **æ–°å¢æ–‡ä»¶**ï¼š1 ä¸ªï¼ˆLocalAdvisorEngine.ktï¼Œ290 è¡Œï¼‰
- **ä¿®æ”¹æ–‡ä»¶**ï¼š4 ä¸ª
  - DailyAdviceModels.ktï¼ˆæ–°å¢ LOCAL æšä¸¾å€¼ï¼‰
  - DailyAdviceCoordinator.ktï¼ˆåˆ†å±‚é€»è¾‘ + åé¦ˆé—­ç¯ï¼Œ+80 è¡Œï¼‰
  - AdvicePromptBuilder.ktï¼ˆé›†æˆåé¦ˆæ‘˜è¦å±•ç¤ºï¼Œ-1 è¡Œæ³¨é‡Šï¼‰
  - AppContainer.ktï¼ˆæ³¨å…¥ LocalAdvisorEngineï¼Œ+3 è¡Œï¼‰
- **æ–°å¢ä»£ç **ï¼š~390 è¡Œ
- **Build ä»»åŠ¡**ï¼š107 tasks

---

## æ€»ç»“

é˜¶æ®µ3 æˆåŠŸå®ç°äº† AI å»ºè®®ç³»ç»Ÿçš„åˆ†å±‚æ¶æ„ï¼Œå°†ç®€å•åœºæ™¯äº¤ç»™æœ¬åœ°è§„åˆ™å¼•æ“å¤„ç†ï¼ˆ70%ï¼‰ï¼ŒAI ä¸“æ³¨äºå¤æ‚æ¨¡å¼åˆ†æï¼ˆ30%ï¼‰ï¼Œå¹¶é€šè¿‡å†å²åé¦ˆé—­ç¯æŒç»­ä¼˜åŒ–å»ºè®®è´¨é‡ã€‚

**æ ¸å¿ƒæˆæœ**ï¼š
- âœ… API è°ƒç”¨èŠ‚çœ ~65%
- âœ… ç®€å•åœºæ™¯å“åº”æ—¶é—´ < 20ms
- âœ… AI å»ºè®®è´¨é‡æå‡ï¼ˆä¸“æ³¨å¤æ‚åœºæ™¯ï¼‰
- âœ… åé¦ˆé—­ç¯æ­£å¼å¯ç”¨ï¼ˆå†å²æœ‰æ•ˆæ€§æ•°æ®å›æµï¼‰

**å¾…å®Œæˆ**ï¼š
- UI å±‚åé¦ˆç•Œé¢ï¼ˆTask 3.4ï¼‰
- ç«¯åˆ°ç«¯æµ‹è¯•éªŒè¯
